<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
	<title>Synapse marquee status</title>

	<script type="text/javascript" src="synapse.js"></script>

	<script type="text/javascript">

	/// SYNAPSE EVENT HANDLERS


	synapse_register("error",function(errortxt)
	{
		$('#error').html(errortxt);
	});	

			
	synapse_register("module_SessionStart",function(msg_src, msg_dst, msg_event, msg)
	{
	if (msg["username"]=="anonymous")
		synapse_login();
	else
		send(0,"marquee_Get", { });
	});

	synapse_register("module_Login",function(msg_src, msg_dst, msg_event, msg)
	{
		send(0,"marquee_Get", { });
	});


	synapse_register("marquee_Set",function(msg_src, msg_dst, msg_event, msg)
	{
		var s;
		s=msg["text"].replace(/&/gmi, '&amp;').
			replace(/"/gmi, '&quot;').
		    replace(/>/gmi, '&gt;').
		    replace(/</gmi, '&lt;');
	    
		s="<span style='color: red'>"+s+"</span>";
		s=s.replace(/%C0/g, "</span><span style='color: #ff0000'>");
		s=s.replace(/%C1/g, "</span><span style='color: #aa0000'>");
		s=s.replace(/%C2/g, "</span><span style='color: #aaaa00'>");
		s=s.replace(/%C3/g, "</span><span style='color: #ffff00'>");
		s=s.replace(/%C4/g, "</span><span style='color: #EE7600'>");
		s=s.replace(/%C5/g, "</span><span style='color: #EE9A00'>");
		s=s.replace(/%C6/g, "</span><span style='color: #00aa00'>");
		s=s.replace(/%C7/g, "</span><span style='color: #00ff00'>");
		$('#text').html(s);
	});


	/// JAVA SCRIPT EVENT HANDLERS
	$(document).ready(function(){

	});


	</script>

	<style>

		body 
		{
			height:100%;
			text-align:center;
			background-color: #000000;
		}
		
		#text
		{
			color: #ffffff;
			font-size: 1000%;
			font-weight: bold;
			font-family: monospace;
		} 

 	</style>
</head>


<body>
	<div id='text'></div>
</body>
</html>

