<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="json2.js"></script>
	<script type="text/javascript" src="synapse.js"></script>
	<script type="text/javascript">

		synapse_register("error",function(errortxt)
		{
			$('#error').html(errortxt);
		});	
				
		synapse_register("default",function(msg_src, msg_dst, msg_event, msg)
		{
			$('#msg_src').html(msg_src);
			$('#msg_dst').html(msg_dst);
			$('#msg_event').html(msg_event);
			$('#msg').html(JSON.stringify(msg));

		});
	
 		synapse_register("module_SessionStart",function(msg_src, msg_dst, msg_event, msg)
 		{
 			$('#authCookie').html(msg["authCookie"]);
 			$('#dst').html(msg_dst);
 		});

		$(document).ready(function(){

			$('#stop').click(function(event){
				//send(0,"test","bla");
				synapse_stop=true;
			});

			$('#poll').click(function(event){
				synapse_stop=true;
				synapse_receive();
			});

			$('#start').click(function(event){
				synapse_stop=false;
				synapse_receive();
			});

			$('#reset').click(function(event){
				synapse_authCookie=0;
				synapse_receive();
			});

		});


	</script>
</head>


<body>
<p>
	Tip: Use the firebug console to see debugging output.
	<p>

	<ul>
	<li>Last HTTP error:				<span id='error' style='color: red'></span>
	<li>HTTP authCookie:		<span id='authCookie'></span>
	<li>Synapse session id:		<span id='dst'></span>
	<li>
		Last message:
		<ul>
			<li>Source: 		<span id='msg_src'></div>
			<li>Destination: 	<span id='msg_dst'></div>
			<li>Event: 			<span id='msg_event'></div>
			<li>JSON parameters:<span id='msg'></div>
		</ul>


	</ul>


	<input type='submit' value='Stop polling' id='stop'>
	<input type='submit' value='Poll one time' id='poll'>
	<input type='submit' value='Start polling' id='start'>
	<br>
	<input type='submit' value='New session (stop polling first)' id='reset'>





<form>
  <div><input type="text" name="a" value="1" id="a" /></div>
  <div><input type="text" name="b" value="2" id="b" /></div>
  <div><input type="hidden" name="c" value="3" id="c" /></div>
  <div>
    <textarea name="d" rows="8" cols="40">4</textarea>
  </div>
  <div><select name="e">
    <option value="5" selected="selected">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
  </select></div>
  <div>
    <input type="checkbox" name="f" value="8" id="f" />
  </div>
  <div>
    <input type="submit" name="g" value="Submit" id="g" />
  </div>
</form>


</body>

</html>

<script >
$('form').submit(function() {
  alert($(this).serializeArray());
  return false;
});

</script>