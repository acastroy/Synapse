<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
	<title>Synapse pong demo</title>

	<script type="text/javascript" src="synapse.js"></script>

	<script type="text/javascript">


		/// SYNAPSE EVENT HANDLERS

 		synapse_register("pong_GameStatus",function(msg_src, msg_dst, msg_event, msg)
 		{
			if ($("#gameList #"+msg["id"]).length==0)
			{
				//add to gamelist
				html="<div class='game' id='"+msg["id"]+"'>";
				html+="</div>";
				$('#gameList').append(html);
			}
			
			$("#gameList #"+msg["id"]).html(
					"Game of " + msg["name"]  + " (game id " +msg["id"] + ")"
					);
				
		});

		synapse_register("pong_GameDeleted",function(msg_src, msg_dst, msg_event, msg)
		{	
					
		});

 		synapse_register("module_SessionStart",function(msg_src, msg_dst, msg_event, msg)
 		{
			send(0,"pong_GetGames", { 
			});
		});


		/// JAVA SCRIPT EVENT HANDLERS
		$(document).ready(function(){
			$("#newGame").click(function()
					{
						send(0,"pong_NewGame", {
								"name":$("#name").val()
							});
					});
			$("#getGames").click(function()
					{
						$('.game').remove();
						send(0,"pong_GetGames", {});
					});
			

		});


	</script>

	<style>
		body 
		{
			margin:0;
			padding:0;
			height:100%;
		} 


		.color1  { color: #ff0000; } 
		.color2  { color: #00ff00; } 
		.color3  { color: #0000ff; } 
		.color4  { color: #ffff00; } 
		.color5  { color: #ff00ff; } 
		.color6  { color: #00ffff; } 
		.color7  { color: #aaff00; } 
		.color8  { color: #00ffaa; } 
		.color9  { color: #aa00aa; } 
		.color10 { color: #aa00ff; } 

		#gameManager
		{
			position:absolute; 
			left:0;
			top: 0;
			width: 20em;
			bottom:0;
			border-style:solid;
		}

		#gameField
		{
			position:absolute; 
			left:20em;
			top: 0;
			right: 0;
			bottom:0;
			border-style:solid;
		}
		
	</style>

</head>


<body class='ui-widget'>
	<p>

	<div class='ui-widget-content' id='gameManager'>
		<div class='ui-widget-header'>Your name:</div>
		<input id='name' type='text' value=''>

		<div class='ui-widget-header'>Available games:</div>
		<div id='gameList'></div>
		<input id='newGame' type='submit' value='New game'>
		<input id='getGames' type='submit' value='Refresh...'>
	</div>




	<div id='gameField'>
	</div>


	
</body>
</html>